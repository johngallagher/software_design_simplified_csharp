"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var sdk=require("@builder.io/sdk"),core=require("@emotion/core"),React=require("react"),ReactDOM=require("react-dom"),hash=require("hash-sum");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var React__default=_interopDefaultLegacy(React),React__namespace=_interopNamespace(React),ReactDOM__default=_interopDefaultLegacy(ReactDOM),hash__default=_interopDefaultLegacy(hash),version="3.0.7-1",_a;"undefined"!=typeof window&&(null===(_a=window.parent)||void 0===_a||_a.postMessage({type:"builder.isReactSdk",data:{value:!0,supportsPatchUpdates:"v4",supportsCustomBreakpoints:!0,priorVersion:version}},"*"));var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function __decorate(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function __spreadArray(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var fastClone=function(e){return JSON.parse(JSON.stringify(e))},sizeNames=["xsmall","small","medium","large"],sizes={xsmall:{min:0,default:0,max:0},small:{min:320,default:321,max:640},medium:{min:641,default:642,max:991},large:{min:990,default:991,max:1200},getWidthForSize:function(e){return this[e].default},getSizeForWidth:function(e){for(var t=0,n=sizeNames;t<n.length;t++){var i=n[t];if(e<=this[i].max)return i}return"large"}},getSizesForBreakpoints=function(e){var t=e.small,n=e.medium,i=__assign(__assign({},sizes),fastClone(sizes));if(!t||!n)return i;var r=Math.floor(t/2);i.small={max:t,min:r,default:r+1};var a=i.small.max+1;i.medium={max:n,min:a,default:a+1};var o=i.medium.max+1;return i.large={max:2e3,min:o,default:o+1},i},set=function(e,t,n){if(Object(e)!==e)return e;var i=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g);return i.slice(0,-1).reduce((function(e,t,n){return Object(e[t])===e[t]?e[t]:e[t]=Math.abs(Number(i[n+1]))>>0==+i[n+1]?[]:{}}),e)[i[i.length-1]]=n,e},noop=function(){return null},safeDynamicRequire;if("function"==typeof(null===globalThis||void 0===globalThis?void 0:globalThis.require)||sdk.Builder.isServer&&"function"==typeof require)try{safeDynamicRequire=eval("require")}catch(e){safeDynamicRequire=(null===globalThis||void 0===globalThis?void 0:globalThis.require)?globalThis.require:noop}null!=safeDynamicRequire||(safeDynamicRequire=noop);var fnCache={},api=function(e){return sdk.builder};function stringToFunction(e,t,n,i){if(void 0===t&&(t=!0),!e||!e.trim())return function(){};var r=e+":"+t;if(fnCache[r])return fnCache[r];var a=t&&!(e.includes(";")||e.includes(" return ")||e.trim().startsWith("return "))||e.trim().startsWith("builder.run"),o=function(){};try{sdk.Builder.isBrowser&&(o=new Function("state","event","block","builder","Device","update","Builder","context","\n          var names = [\n            'state',\n            'event',\n            'block',\n            'builder',\n            'Device',\n            'update',\n            'Builder',\n            'context'\n          ];\n          var rootState = state;\n          if (typeof Proxy !== 'undefined') {\n            rootState = new Proxy(rootState, {\n              set: function () {\n                return false;\n              },\n              get: function (target, key) {\n                if (names.includes(key)) {\n                  return undefined;\n                }\n                return target[key];\n              }\n            });\n          }\n          /* Alias */\n          var ctx = context;\n          with (rootState) {\n            ".concat(a?"return (".concat(e,");"):e,";\n          }\n        ")))}catch(t){n&&n.push(t);var s=t&&t.message;s&&"string"==typeof s&&i&&-1===i.indexOf(s)&&i.push(s),sdk.Builder.isBrowser&&console.warn("Function compile error in ".concat(e),t)}var l=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];try{if(sdk.Builder.isBrowser)return o.apply(void 0,t);var r=safeDynamicRequire("vm2").VM,a=t[0],s=t[1],l=(t[2],t[3],t[4],t[5],t[6],t[7]);return new r({timeout:100,sandbox:__assign(__assign(__assign(__assign(__assign({},a),{state:a}),{context:l}),{builder:api}),{event:s})}).run(e.replace(/(^|;)return /,"$1"))}catch(t){return sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message||t,"in",e,t.stack||t):"undefined"!=typeof process&&void 0!==process.env&&process.env.DEBUG&&console.debug("Builder custom code error:",t.message||t,"in",e,t.stack||t),n&&n.push(t),null}};return sdk.Builder.isBrowser&&(fnCache[r]=l),l}var isPromise=function(e){return"function"==typeof e.then},isRequestInfo=function(e){return!isPromise(e)},BuilderAsyncRequestsContext=React__default.default.createContext({requests:[],errors:[],logs:[]}),BuilderStoreContext=React__default.default.createContext({state:{},rootState:{},content:{},context:{},update:function(e){return null}}),applyPatchWithMinimalMutationChain=function(e,t,n){if(void 0===n&&(n=!1),Object(e)!==e)return e;var i=t.path,r=t.op,a=t.value,o=i.split(/\//);""===o[0]&&o.shift();for(var s=n?e:__assign({},e),l=s,u=0;u<o.length;u++){var d=u===o.length-1,c=o[u];if(d){if("replace"===r)l[c]=a;else if("add"===r){var p=Number(c);Array.isArray(l)?"-"===c?l.push(a):l.splice(p,0,a):l[c]=a}else if("remove"===r){p=Number(c);Array.isArray(l)?l.splice(p,1):delete l[c]}}else{var f=o[u+1],v=Object(l[c])===l[c]?l[c]:String(Number(f))===f?[]:{};l=l[c]=Array.isArray(v)?__spreadArray([],v,!0):__assign({},v)}}return s},htmlEscape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},blockToHtmlString=function(e){var t;return"<".concat(htmlEscape(e.tagName||"div"),' \n    class="builder-block ').concat(e.id," ").concat(e.class||"",'"\n    builder-id="').concat(e.id,'"\n  ').concat(Object.keys(e.properties||{}).map((function(t){return"".concat(htmlEscape(t),'="').concat(htmlEscape(e.properties[t]),'"')})).join(" "),"\n  >").concat("Text"===(null===(t=null==e?void 0:e.component)||void 0===t?void 0:t.name)?e.component.options.text:e.children?e.children.map((function(e){return blockToHtmlString(e)})).join(""):"","</").concat(e.tagName||"div",">").replace(/\s+/g," ")},Link=function(e){return React__default.default.createElement(BuilderStoreContext.Consumer,null,(function(t){return t.renderLink?t.renderLink(e):React__default.default.createElement("a",__assign({},e))}))},camelCaseToKebabCase=function(e){return e?e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())})):""},kebabCaseToCamelCase=function(e){return void 0===e&&(e=""),e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))},Device={desktop:0,tablet:1,mobile:2},voidElements=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","textarea"]),last=function(e){return e[e.length-1]};function omit$1(e,t){for(var n=Object.assign({},e),i=0,r=t;i<r.length;i++){delete n[r[i]]}return n}var cssCase=function(e){if(!e)return e;var t=camelCaseToKebabCase(e);return e[0]===e[0].toUpperCase()&&(t="-"+t),t};function capitalize(e){if(e)return e[0].toUpperCase()+e.slice(1)}var BuilderBlock=function(_super){function BuilderBlock(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={hasError:!1,updates:0},_this.privateState={state:{},rootState:{},context:{},update:function(){}},_this.onWindowMessage=function(event){var message=event.data;if(message)switch(message.type){case"builder.selectionChange":var data=message.data;if(!data)break;var selection=data.selection,id=_this.block&&_this.block.id;id&&Array.isArray(selection)&&selection.indexOf(id)>-1&&setTimeout((function(){window.$block=_this,window.$blocks||(window.$blocks=[]),window.$blocks.push(_this)}));break;case"builder.patchUpdates":var data=message.data;if(!data||!data.data)break;var patches=data.data[_this.block.id];if(!patches)return;location.href.includes("builder.debug=true")&&eval("debugger");for(var _i=0,patches_1=patches;_i<patches_1.length;_i++){var patch=patches_1[_i];applyPatchWithMinimalMutationChain(_this.props.block,patch,!0)}_this.setState({updates:_this.state.updates+1})}},_this}return __extends(BuilderBlock,_super),Object.defineProperty(BuilderBlock.prototype,"store",{get:function(){return this.privateState},enumerable:!1,configurable:!0}),BuilderBlock.getDerivedStateFromError=function(e){return{hasError:!0}},BuilderBlock.prototype.componentDidCatch=function(e,t){console.error("Builder block error:",e,t)},BuilderBlock.prototype.stringToFunction=function(e,t){return void 0===t&&(t=!0),stringToFunction(e,t,this._errors,this._logs)},Object.defineProperty(BuilderBlock.prototype,"block",{get:function(){return this.props.block},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderBlock.prototype,"emotionCss",{get:function(){var e,t,n,i,r,a=this.block;if(sdk.Builder.isServer){var o=a.animations&&a.animations[0];if(o&&"hover"!==o.trigger){var s=o&&o.steps&&o.steps[0],l=s&&s.styles;l&&(r=l)}}var u=sizeNames.slice().reverse(),d=this.block,c={};if(d.responsiveStyles)for(var p=0,f=u;p<f.length;p++){var v=f[p];if("large"===v)this.props.emailMode||(c["&.builder-block"]=Object.assign({},d.responsiveStyles[v],r));else{var h=getSizesForBreakpoints((null===(t=null===(e=this.privateState.context.builderContent)||void 0===e?void 0:e.meta)||void 0===t?void 0:t.breakpoints)||{});c["@media only screen and (max-width: ".concat(h[v].max,"px)")]={"&.builder-block":d.responsiveStyles[v]}}}var m=a.animations&&a.animations.find((function(e){return"hover"===e.trigger}));return m&&(c[":hover"]=(null===(i=null===(n=m.steps)||void 0===n?void 0:n[1])||void 0===i?void 0:i.styles)||{},c.transition="all ".concat(m.duration,"s ").concat(camelCaseToKebabCase(m.easing)),m.delay&&(c.transitionDelay=m.delay+"s")),c},enumerable:!1,configurable:!0}),BuilderBlock.prototype.eval=function(e){return this.stringToFunction(e)(this.privateState.state,void 0,this.block,sdk.builder,Device,this.privateState.update,sdk.Builder,this.privateState.context)},BuilderBlock.prototype.componentWillUnmount=function(){sdk.Builder.isEditing&&removeEventListener("message",this.onWindowMessage)},BuilderBlock.prototype.componentDidMount=function(){var e,t=this,n=this.block,i=n&&n.animations;if(sdk.Builder.isEditing&&addEventListener("message",this.onWindowMessage),i){var r={animations:fastClone(i)};if(n.bindings)for(var a in n.bindings)if((null===(e=a.trim)||void 0===e?void 0:e.call(a))&&a.startsWith("animations.")){var o=this.stringToFunction(n.bindings[a]);void 0!==o&&set(r,a,o(this.privateState.state,null,n,sdk.builder,null,null,sdk.Builder,this.privateState.context))}sdk.Builder.animator.bindAnimations(r.animations.filter((function(e){return"hover"!==e.trigger})).map((function(e){return __assign(__assign({},e),{elementId:t.block.id})})))}},BuilderBlock.prototype.getElement=function(e,t){var n,i,r,a,o,s=this;void 0===e&&(e=0),void 0===t&&(t=this.privateState.state);var l=this.props;l.child,l.fieldName;var u,d=this.block,c=(d.tagName||"div").toLowerCase();if("template"===c){var p=d.children?d.children.map((function(e){return blockToHtmlString(e)})).join(" "):"";return console.debug("template html",p),core.jsx("template",__assign({},d.properties,{dangerouslySetInnerHTML:{__html:p}}))}var f=d.component&&(d.component.name||d.component.component),v=null;d.component&&!d.component.class&&(d.component&&d.component.tag?u=d.component.tag:(v=sdk.Builder.components.find((function(e){return e.name===f}))||null)&&v.class?u=v.class:v&&v.tag?u=v.tag:(null==f?void 0:f.startsWith("Builder:"))?console.warn("Missing @builder.io/widgets installation, please install and import @builder.io/widgets to use ".concat(f.split(":")[1]," in your content, more info here: https://github.com/BuilderIO/builder/tree/main/packages/widgets")):f&&console.warn("Missing registration for ".concat(f,", have you included the registration in your bundle?")));var h=__assign(__assign({},d.properties),{style:{}});if(h=__assign(__assign({},h.properties),h),d.component&&(h.component=fastClone(d.component)),d.bindings)for(var m in d.bindings)if(null===(i=m.trim)||void 0===i?void 0:i.call(m)){var g=this.stringToFunction(d.bindings[m]);set(h,m,g(t,null,d,api(),Device,null,sdk.Builder,this.privateState.context))}if(h.hide)return null;if(delete h.hide,("show"in h||d.bindings&&d.bindings.show)&&!h.show)return null;if(delete h.show,d.actions){var b=function(e){if(!(null===(r=e.trim)||void 0===r?void 0:r.call(e)))return"continue";var n=d.actions[e];h["on"+capitalize(e)]=function(e){var i=t;return"undefined"!=typeof Proxy&&(i=new Proxy(t,{set:function(e,t,n){return e[t]=n,s.privateState.rootState[t]=n,!0}})),s.stringToFunction(n,!1)(i,e,s.block,sdk.builder,Device,s.privateState.update,sdk.Builder,s.privateState.context)}};for(var m in d.actions)b(m)}var _=(h.component||h.options)&&__assign(__assign({},h.options),h.component.options||h.component.data),y=voidElements.has(c),k=v&&(v.fragment||v.noWrap),B=(null===(a=h.attr)||void 0===a?void 0:a.style)||("string"==typeof h.style?h.style:"")||"";if("string"==typeof B){"object"!=typeof h.style&&(h.style={});for(var C=0,S=B.split(";");C<S.length;C++){var w=S[C].split(":");if(!w.length)return;m=w[0],g=w[1];m&&(w.length>2&&(g=w.slice(1).join(":")),h.style[kebabCaseToCamelCase(m)]=g)}}var x=__assign(__assign(__assign({},omit$1(h,["class","component","attr"])),((n={})["string"!=typeof c||c.includes("-")?"class":"className"]="builder-block ".concat(this.id).concat(d.class?" ".concat(d.class):"").concat(!d.component||["Image","Video","Banner"].indexOf(f)>-1?"":" builder-has-component")+(h.class?" "+h.class:"")+(sdk.Builder.isEditing&&(null===(o=this.privateState.state._spacer)||void 0===o?void 0:o.parent)===d.id?" builder-spacer-parent":""),n.key=this.id+e,n["builder-id"]=this.id,n)),0!==e&&{"builder-index":e});sdk.Builder.isEditing&&(x["builder-inline-styles"]=h.attr&&h.attr.style?Object.keys(h.style).reduce((function(e,t){return(e?"".concat(e,";"):"")+"".concat(cssCase(t),":").concat(h.style[t],";")}),""):""),(x.properties&&x.properties.href||x.href)&&"div"===c&&(c="a"),"a"===c&&(c=Link);var E=d.children||x.children||[];return core.jsx(React__default.default.Fragment,null,core.jsx(core.ClassNames,null,(function(e){var t=e.css;if(e.cx,!s.props.emailMode){var n=" "+t(s.emotionCss);x.class&&(x.class+=n),x.className&&(x.className+=n)}return core.jsx(BuilderAsyncRequestsContext.Consumer,null,(function(e){return s._asyncRequests=e&&e.requests,s._errors=e&&e.errors,s._logs=e&&e.logs,y?core.jsx(c,__assign({},x)):u&&(k||s.props.emailMode)?core.jsx(u,__assign({},_,{attributes:x,builderBlock:d,builderState:s.privateState})):core.jsx(c,__assign({},x),u&&core.jsx(u,__assign({builderState:s.privateState,builderBlock:d},_)),d.text||h.text?h.text:!u&&E&&Array.isArray(E)&&E.length?E.map((function(e,t){return core.jsx(BuilderBlock,{key:(s.id||"")+t,block:e,index:t,size:s.props.size,fieldName:s.props.fieldName,child:s.props.child,emailMode:s.props.emailMode})})):null)}))})))},Object.defineProperty(BuilderBlock.prototype,"id",{get:function(){var e=this.block;return e.id.startsWith("builder")?e.id:"builder-"+e.id},enumerable:!1,configurable:!0}),BuilderBlock.prototype.contents=function(e){var t=this,n=this.block;if(this.privateState=e,n.repeat&&n.repeat.collection){var i=n.repeat.collection,r=last((i||"").trim().split("(")[0].trim().split(".")),a=n.repeat.itemName||(r?r+"Item":"item"),o=this.stringToFunction(i)(e.state,null,n,api(),Device,null,sdk.Builder,this.privateState.context);return Array.isArray(o)?o.map((function(n,i){var r,o=__assign(__assign({},e.state),((r={$index:i,$item:n})[a]=n,r["$".concat(a,"Index")]=i,r));return core.jsx(BuilderStoreContext.Provider,{key:i,value:__assign(__assign({},e),{state:o})},t.getElement(i,o))})):null}return this.getElement()},BuilderBlock.prototype.render=function(){var e=this;return this.state.hasError?core.jsx("span",{css:{display:"inline-block",padding:5,color:"#999",fontSize:11,fontStyle:"italic"}},"Builder block error :( Check console for details"):core.jsx(BuilderStoreContext.Consumer,null,(function(t){return e.contents(t)}))},BuilderBlock}(React__default.default.Component),BuilderBlocks=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickEmptyBlocks=function(){var e;sdk.Builder.isIframe&&t.noBlocks&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.clickEmptyBlocks",data:{parentElementId:t.parentId,dataPath:t.path}},"*"))},t.onHoverEmptyBlocks=function(){var e;sdk.Builder.isEditing&&t.noBlocks&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.hoverEmptyBlocks",data:{parentElementId:t.parentId,dataPath:t.path}},"*"))},t}return __extends(t,e),Object.defineProperty(t.prototype,"isRoot",{get:function(){return!this.props.child},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noBlocks",{get:function(){var e=this.props.blocks;return!(e&&e.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.props.dataPath||"";return e.trim()&&(e.startsWith("this.")?e=e.replace("this.",""):e.startsWith("component.options.")||(e="component.options."+e)),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentId",{get:function(){return this.props.parentElementId?this.props.parentElementId:this.props.parent&&this.props.parent.id},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props.blocks,n=this.props.emailMode?"span":"div";return core.jsx(n,__assign({className:"builder-blocks"+(this.noBlocks?" no-blocks":"")+(this.props.child?" builder-blocks-child":"")+(this.props.className?" "+this.props.className:""),"builder-type":"blocks","builder-path":sdk.Builder.isIframe?this.path:void 0,"builder-parent-id":this.parentId,css:__assign(__assign({},!this.props.emailMode&&{display:"flex",flexDirection:"column",alignItems:"stretch"}),this.props.style),onClick:function(){e.noBlocks&&e.onClickEmptyBlocks()}},sdk.Builder.isEditing&&{onMouseEnter:function(){return e.onHoverEmptyBlocks()}}),t&&Array.isArray(t)&&t.map((function(t,n){return t&&"@builder.io/sdk:Element"===t["@type"]?core.jsx(BuilderBlock,{key:t.id,block:t,index:n,fieldName:e.props.fieldName,child:e.props.child,emailMode:e.props.emailMode}):t}))||t)},t.renderInto=function(e,n,i){if(void 0===n&&(n={}),e){var r=null;return"string"==typeof e?r=document.querySelector(e):e instanceof Element&&(r=e),ReactDOM__default.default.render(core.jsx(BuilderStoreContext.Provider,{value:i},core.jsx(t,__assign({},n))),r)}},t}(React__default.default.Component),NoWrap=function(e){return e.children};function getData(e){if(void 0!==(null==e?void 0:e.data)){var t=e.data,n=t.blocks,i=t.blocksString,r=Array.isArray(n)||"string"==typeof i,a=__assign(__assign({},e.data),r&&{blocks:n||JSON.parse(i)});return delete a.blocksString,a}}var variantsScript=function(e,t){return"\n(function() {\n  if (window.builderNoTrack || !navigator.cookieEnabled) {\n    return;\n  }\n\n  var variants = ".concat(e,";\n  function removeVariants() {\n    variants.forEach(function (template) {\n      document.querySelector('template[data-template-variant-id=\"' + template.id + '\"]').remove();\n    });\n    document.getElementById('variants-script-").concat(t,'\').remove();\n  }\n\n  if (typeof document.createElement("template").content === \'undefined\') {\n    removeVariants();\n    return ;\n  }\n\n  function setCookie(name,value,days) {\n    var expires = "";\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = "; expires=" + date.toUTCString();\n    }\n    document.cookie = name + "=" + (value || "")  + expires + "; path=/" + "; Secure; SameSite=None";\n  }\n\n  function getCookie(name) {\n    var nameEQ = name + "=";\n    var ca = document.cookie.split(\';\');\n    for(var i=0;i < ca.length;i++) {\n        var c = ca[i];\n        while (c.charAt(0)==\' \') c = c.substring(1,c.length);\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n  }\n  var cookieName = \'builder.tests.').concat(t,"';\n  var variantInCookie = getCookie(cookieName);\n  var availableIDs = variants.map(function(vr) { return vr.id }).concat('").concat(t,"');\n  var variantId;\n  if (availableIDs.indexOf(variantInCookie) > -1) {\n    variantId = variantInCookie;\n  }\n  if (!variantId) {\n    var n = 0;\n    var random = Math.random();\n    for (var i = 0; i < variants.length; i++) {\n      var variant = variants[i];\n      var testRatio = variant.testRatio;\n      n += testRatio;\n      if (random < n) {\n        setCookie(cookieName, variant.id);\n        variantId = variant.id;\n        break;\n      }\n    }\n    if (!variantId) {\n      variantId = \"").concat(t,'";\n      setCookie(cookieName, "').concat(t,'");\n    }\n  }\n  if (variantId && variantId !== "').concat(t,"\") {\n    var winningTemplate = document.querySelector('template[data-template-variant-id=\"' + variantId + '\"]');\n    if (winningTemplate) {\n      var parentNode = winningTemplate.parentNode;\n      var newParent = parentNode.cloneNode(false);\n      newParent.appendChild(winningTemplate.content.firstChild);\n      parentNode.parentNode.replaceChild(newParent, parentNode);\n    }\n  } else if (variants.length > 0) {\n    removeVariants();\n  }\n})()").replace(/\s+/g," ")},VariantsProvider=function(e){var t=e.initialContent,n=e.children;if(sdk.Builder.isBrowser&&!sdk.builder.canTrack)return n([t]);if(!Boolean(Object.keys((null==t?void 0:t.variations)||{}).length))return n([t]);var i=Object.keys(t.variations).map((function(e){return __assign(__assign({id:e},t.variations[e]),{data:getData(t.variations[e])})})),r=__spreadArray(__spreadArray([],i,!0),[t],!1);if(sdk.Builder.isServer){var a=JSON.stringify(Object.keys(t.variations||{}).map((function(e){return{id:e,testRatio:t.variations[e].testRatio}})));return React__namespace.createElement(React__namespace.Fragment,null,n(r,(function(){return React__namespace.createElement("script",{id:"variants-script-".concat(t.id),dangerouslySetInnerHTML:{__html:variantsScript(a,t.id)}})})))}var o="builder.tests.".concat(t.id),s=sdk.builder.getCookie(o);if(!s&&sdk.Builder.isBrowser)for(var l=0,u=Math.random(),d=0;d<i.length;d++){var c=i[d];if(u<(l+=c.testRatio)){sdk.builder.setCookie(o,c.id),s=c.id;break}}return s||(s=t.id,sdk.builder.setCookie(o,s)),n([r.find((function(e){return e.id===s}))])},BuilderContent=function(_super){function BuilderContent(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ref=null,_this.state={loading:!_this.props.content,data:getContentWithInfo(_this.props.content),updates:1},_this.onWindowMessage=function(event){var _a,_b,message=event.data;if(message)switch(message.type){case"builder.patchUpdates":if(null===(_a=_this.props.options)||void 0===_a?void 0:_a.noEditorUpdates)return;var data=message.data;if(!data||!data.data)break;var patches=data.data[null===(_b=_this.state.data)||void 0===_b?void 0:_b.id];if(!patches||!patches.length)return;location.href.includes("builder.debug=true")&&eval("debugger");for(var newData=_this.state.data,_i=0,patches_1=patches;_i<patches_1.length;_i++){var patch=patches_1[_i];newData=applyPatchWithMinimalMutationChain(newData,patch,!1)}_this.setState({updates:_this.state.updates+1,data:newData}),_this.props.contentLoaded&&_this.props.contentLoaded(newData.data,newData)}},_this.subscriptions=new sdk.Subscription,_this.firstLoad=!0,_this.clicked=!1,_this.trackedImpression=!1,_this.intersectionObserver=null,_this.onClick=function(e){var t=e.nativeEvent,n=_this.data;n&&(sdk.builder.autoTrack&&_this.builder.trackInteraction(n.id,_this.renderedVariantId,_this.clicked,t,{content:n}),_this.clicked||(_this.clicked=!0))},_this}return __extends(BuilderContent,_super),Object.defineProperty(BuilderContent.prototype,"builder",{get:function(){return this.props.builder||sdk.builder},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"name",{get:function(){var e=this.props;return"model"in e?e.model:e.modelName},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"renderedVariantId",{get:function(){var e,t,n=this.props.isStatic?this.builder.getCookie("builder.tests.".concat(null===(e=this.data)||void 0===e?void 0:e.id)):null===(t=this.data)||void 0===t?void 0:t.variationId;if(null!==n)return n},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"options",{get:function(){var e,t,n=__assign({},this.props.options||{});return n.key||!(null===(e=this.props.content)||void 0===e?void 0:e.id)||sdk.Builder.isEditing||sdk.Builder.isPreviewing||(n.key=this.props.content.id),!this.props.content||(null===(t=n.initialContent)||void 0===t?void 0:t.length)||!this.props.inline&&sdk.Builder.isPreviewing||(n.initialContent=[this.props.content]),n},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"data",{get:function(){var e=(this.props.inline||!sdk.Builder.isBrowser||this.firstLoad)&&this.options.initialContent&&this.options.initialContent[0]||this.state.data;return getContentWithInfo(e)},enumerable:!1,configurable:!0}),BuilderContent.prototype.componentDidMount=function(){var e,t;if(!this.props.inline||sdk.Builder.isEditing||sdk.Builder.isPreviewing)this.subscribeToContent();else if(this.props.inline&&(null===(t=null===(e=this.options)||void 0===e?void 0:e.initialContent)||void 0===t?void 0:t.length)){var n=this.options.initialContent[0];(null==n?void 0:n.id)&&this.builder.trackImpression(n.id,this.renderedVariantId,void 0,{content:n})}sdk.Builder.isEditing&&addEventListener("message",this.onWindowMessage)},BuilderContent.prototype.subscribeToContent=function(){var e=this;"_inline"!==this.name&&this.subscriptions.add(sdk.builder.queueGetContent(this.name,this.options).subscribe((function(t){var n=t&&t[0];e.setState({data:n,loading:!1});var i=(sdk.builder.editingModel||sdk.builder.previewingModel)===e.name;if(!e.props.inline&&e.props.content&&e.firstLoad&&i&&(e.firstLoad=!1,e.subscriptions.unsubscribe(),e.subscribeToContent()),n&&e.firstLoad&&(e.firstLoad=!1,sdk.builder.autoTrack&&!sdk.Builder.isEditing)){var r=!1;if("function"==typeof IntersectionObserver&&e.ref)try{(e.intersectionObserver=new IntersectionObserver((function(t,i){t.forEach((function(t){t.intersectionRatio>0&&!e.trackedImpression&&(e.builder.trackImpression(n.id,e.renderedVariantId,void 0,{content:e.data}),e.data,e.trackedImpression=!0,e.ref&&i.unobserve(e.ref))}))}))).observe(e.ref),r=!0}catch(e){console.warn("Could not bind intersection observer")}r||(e.trackedImpression=!0,e.builder.trackImpression(n.id,e.renderedVariantId,void 0,{content:n}))}e.props.contentLoaded&&e.props.contentLoaded(n&&n.data,n)}),(function(t){e.props.contentError&&(e.props.contentError(t),e.setState({loading:!1}))})))},BuilderContent.prototype.componentWillUnmount=function(){sdk.Builder.isEditing&&removeEventListener("message",this.onWindowMessage),this.subscriptions.unsubscribe(),this.intersectionObserver&&this.ref&&this.intersectionObserver.unobserve(this.ref)},BuilderContent.prototype.render=function(){var e=this;if(this.props.dataOnly)return null;var t=this.state.loading,n=this.data,i=this.props.dataOnly?NoWrap:"div";return React__default.default.createElement(VariantsProvider,{initialContent:n},(function(r,a){return React__default.default.createElement(React__default.default.Fragment,null,r.map((function(o,s){var l=s===r.length-1?React__default.default.Fragment:"template";return React__default.default.createElement(React__default.default.Fragment,{key:String((null==o?void 0:o.id)+s)},"template"!==l&&(null==a?void 0:a()),React__default.default.createElement(l,__assign({key:String((null==o?void 0:o.id)+s)},"template"===l&&{"data-template-variant-id":null==o?void 0:o.id}),React__default.default.createElement(i,__assign({},0===s&&!e.props.dataOnly&&{ref:function(t){return e.ref=t}},{className:"builder-content",onClick:e.onClick,"builder-content-id":null==o?void 0:o.id,"builder-model":e.name}),e.props.children(null==o?void 0:o.data,!e.props.inline&&t,n))))})))}))},BuilderContent}(React__default.default.Component),getContentWithInfo=function(e){var t;if(e){var n=sdk.builder.getCookie("builder.tests.".concat(e.id)),i=n===e.id?e:null===(t=e.variations)||void 0===t?void 0:t[n],r=(null==i?void 0:i.name)||((null==i?void 0:i.id)===e.id?"Default variation":"");return __assign(__assign({},e),{variationId:n,testVariationId:n,testVariationName:r})}return null};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var onChange_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Symbol("target"),i=Symbol("unsubscribe"),r=function(e,t){return t&&t.toString&&(e&&(e+="."),e+=t.toString()),e},a=function(e){return Array.isArray(e)?e.slice():Object.assign({},e)},o=function(e,t,o){if("undefined"==typeof Proxy)return e;void 0===o&&(o={});var s,l,u=Symbol("ProxyTarget"),d=!1,c=!1,p=!1,f=o.equals||Object.is,v=new WeakMap,h=new WeakMap,m=new WeakMap,g=function(e,n,i,o){if(!p)if(d){if(d&&l&&void 0!==i&&void 0!==o&&"length"!==n){var u=l;e!==s&&function(e,t){for(var n;e;)-1===(n=e.indexOf("."))&&(n=e.length),t(e.slice(0,n)),e=e.slice(n+1)}(e=e.replace(s,"").slice(1),(function(e){u[e]=a(u[e]),u=u[e]})),u[n]=i}c=!0}else t(r(e,n),o,i)},b=function(e,t){var n=v?v.get(e):void 0;n&&n.delete(t)},_=function(e,t){if(p)return e;h.set(e,t);var n=m.get(e);return void 0===n&&(n=new Proxy(e,k),m.set(e,n)),n},y=function(e){return p||!0===o.ignoreSymbols&&"symbol"==typeof e},k={get:function(e,t,a){if(t===u||t===n)return e;if(t===i&&""===h.get(e))return function(e){return p=!0,v=null,h=null,m=null,e}(e);var s=Reflect.get(e,t,a);if(function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(s)||function(e){return e instanceof RegExp||e instanceof Number}(s)||"constructor"===t||!0===o.isShallow)return s;var l=function(e,t){var n=v?v.get(e):void 0;if(n)return n;n=new Map,v.set(e,n);var i=n.get(t);return i||(i=Reflect.getOwnPropertyDescriptor(e,t),n.set(t,i)),i}(e,t);if(l&&!l.configurable){if(l.set&&!l.get)return;if(!1===l.writable)return s}return _(s,r(h.get(e),t))},set:function(e,t,n,i){n&&void 0!==n[u]&&(n=n[u]);var r=y(t),a=r?null:Reflect.get(e,t,i),o=Reflect.set(e[u]||e,t,n);return r||f(a,n)||g(h.get(e),t,a,n),o},defineProperty:function(e,t,n){var i=Reflect.defineProperty(e,t,n);return y(t)||(b(e,t),g(h.get(e),t,void 0,n.value)),i},deleteProperty:function(e,t){if(!Reflect.has(e,t))return!0;var n=y(t),i=n?null:Reflect.get(e,t),r=Reflect.deleteProperty(e,t);return n||(b(e,t),g(h.get(e),t,i)),r},apply:function(e,t,n){var i=t instanceof Date;if(i&&(t=t[u]),!d){d=!0,i&&(l=t.valueOf()),(Array.isArray(t)||"[object Object]"===toString.call(t))&&(l=a(t[u])),s=(s=h.get(e)).slice(0,Math.max(s.lastIndexOf("."),0));var r=Reflect.apply(e,t,n);return d=!1,(c||i&&!f(l,t.valueOf()))&&(g(s,"",l,t[u]||t),l=null,c=!1),r}return Reflect.apply(e,t,n)}},B=_(e,"");return t=t.bind(B),B};o.target=function(e){return e[n]||e},o.unsubscribe=function(e){return e[i]||e},e.exports=o,t.default=o})),onChange=unwrapExports(onChange_1),nextTick=sdk.Builder.nextTick;function debounceNextTick(e,t,n){return void 0===t&&"function"==typeof e?debounceNextTickImpl(e):{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,t,{configurable:!0,enumerable:n.enumerable,value:debounceNextTickImpl(n.value)}),this[t]}}}function debounceNextTickImpl(e){var t=null,n=null;return function(){var e=t;if(t=[].slice.call(arguments),n=this,null!==e)return;nextTick(i)};function i(){e.apply(n,t),t=null,n=null}}function throttle(e,t,n){var i,r,a;void 0===n&&(n={});var o=null,s=0,l=function(){s=!1===n.leading?0:Date.now(),o=null,a=e.apply(i,r),o||(i=r=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var d=t-(u-s);return i=this,r=arguments,d<=0||d>t?(o&&(clearTimeout(o),o=null),s=u,a=e.apply(i,r),o||(i=r=null)):o||!1===n.trailing||(o=setTimeout(l,d)),a}}var BuilderMetaContext=React__default.default.createContext({emailMode:!1,ampMode:!1,isServer:!1}),tryEval=function(e,t,n){void 0===t&&(t={});var i=e;if("string"==typeof i&&i.trim()){var r=!(i.includes(";")||i.includes(" return ")),a=function(){};try{sdk.Builder.isBrowser&&(a=new Function("state","var rootState = state;\n        if (typeof Proxy !== 'undefined') {\n          rootState = new Proxy(rootState, {\n            set: function () {\n              return false;\n            },\n            get: function (target, key) {\n              if (key === 'state') {\n                return state;\n              }\n              return target[key]\n            }\n          });\n        }\n        with (rootState) {\n          ".concat(r?"return (".concat(e,");"):e,";\n        }")))}catch(e){sdk.Builder.isBrowser&&console.warn("Could not compile javascript",e)}try{return sdk.Builder.isBrowser?a(t||{}):new(0,safeDynamicRequire("vm2").VM)({sandbox:__assign(__assign({},t),{state:t})}).run(i.replace(/(^|;)return /,"$1"))}catch(t){n&&n.push(t),sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message,"in",e,t.stack):"undefined"!=typeof process&&void 0!==process.env&&process.env.DEBUG&&console.debug("Builder custom code error:",t.message,"in",e,t.stack)}}};function toError(e){return e instanceof Error?e:new Error(String(e))}function getBuilderPixel(e){return{id:"builder-pixel-"+Math.random().toString(36).split(".")[1],"@type":"@builder.io/sdk:Element",tagName:"img",properties:{role:"presentation","aria-hidden":"true",src:"https://cdn.builder.io/api/v1/pixel?apiKey=".concat(e)},responsiveStyles:{large:{height:"0",width:"0",display:"inline-block",opacity:"0",overflow:"hidden",pointerEvents:"none"}}}}function pick(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i={};return t.forEach((function(t){i[t]=e[t]})),i}function omit(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=__assign({},e);return t.forEach((function(e){delete i[e]})),i}var wrapComponent=function(e){return function(t){var n,i=t.builderTag||"div",r=["children"].concat((null===(n=e.inputs)||void 0===n?void 0:n.map((function(e){return e.name})))||[]),a=omit.apply(void 0,__spreadArray(__spreadArray([t],r,!1),["attributes"],!1)),o=t;return e.noWrap?React__default.default.createElement(e.class,__assign({attributes:a},o)):React__default.default.createElement(i,__assign({},a),React__default.default.createElement(e.class,__assign({},o)))}},size=function(e){return Object.keys(e).length};function debounce(e,t,n){var i;return void 0===n&&(n=!1),function(){var r=this,a=arguments;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(r,a)}),t),n&&!i&&e.apply(r,a)}}var fontsLoaded=new Set,fetch;globalThis.fetch&&(fetch=globalThis.fetch),null!=fetch||(fetch=require("node-fetch"));var sizeMap={desktop:"large",tablet:"medium",mobile:"small"},fetchCache={};function searchToObject(e){var t=(e.search||"").substring(1).split("&"),n={};for(var i in t)if(t[i]&&"string"==typeof t[i]){var r=t[i].split("=");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return n}var BuilderComponent=function(e){function t(t){var n,i=this;(i=e.call(this,t)||this).subscriptions=new sdk.Subscription,i.onStateChange=new sdk.BehaviorSubject(null),i.asServer=sdk.Builder.isServer,i.contentRef=null,i.styleRef=null,i.rootState=sdk.Builder.isServer?{}:onChange({},(function(){return i.updateState()})),i.lastJsCode="",i.lastHttpRequests={},i.httpSubscriptionPerKey={},i.firstLoad=!0,i.ref=null,i.messageListener=function(e){var t,n=e.data;switch(n.type){case"builder.configureSdk":var r=n.data;if(!r.contentId||r.contentId!==(null===(t=i.useContent)||void 0===t?void 0:t.id))return;i.sizes=getSizesForBreakpoints(r.breakpoints||{}),i.setState({state:Object.assign(i.rootState,{deviceSize:i.deviceSizeState,device:i.device}),updates:(i.state&&i.state.updates||0)+1,breakpoints:r.breakpoints});break;case"builder.updateSpacer":var a=n.data;i.rootState._spacer,i.updateState((function(e){e._spacer=a}));break;case"builder.resetState":var o=n.data,s=o.state;if(o.model===i.name){for(var l in i.rootState)"function"!=typeof i.rootState[l]&&delete i.rootState[l];Object.assign(i.rootState,s),i.setState(__assign(__assign({},i.state),{state:i.rootState,updates:(i.state&&i.state.updates||0)+1}))}break;case"builder.resetSymbolState":var u=n.data.state,d=(s=u.state,u.model,u.id);if(i.props.builderBlock&&i.props.builderBlock===d){for(var l in i.rootState)delete i.rootState[l];Object.assign(i.rootState,s),i.setState(__assign(__assign({},i.state),{state:i.rootState,updates:(i.state&&i.state.updates||0)+1}))}}},i.resizeFn=function(){var e=i.deviceSizeState;e!==i.state.state.deviceSize&&i.setState(__assign(__assign({},i.state),{updates:(i.state&&i.state.updates||0)+1,state:Object.assign(i.rootState,__assign(__assign({},i.state.state),{deviceSize:e}))}))},i.resizeListener=sdk.Builder.isEditing?throttle(i.resizeFn,200):debounce(i.resizeFn,400),i.mounted=!1,i.updateState=function(e){var t=i.rootState;e&&e(t),i.mounted?i.setState({update:i.updateState,state:t,updates:(i.state&&i.state.updates||0)+1}):i.state=__assign(__assign({},i.state),{update:i.updateState,state:t,updates:(i.state&&i.state.updates||0)+1}),i.notifyStateChange()},i.onContentLoaded=function(e,t){if("page"===i.name&&sdk.Builder.isBrowser&&e){var n=e.title,r=e.pageTitle,a=e.description,o=e.pageDescription;if((n||r)&&(document.title=n||r),a||o){var s=document.querySelector('meta[name="description"]');s||((s=document.createElement("meta")).setAttribute("name","description"),document.head.appendChild(s)),s.setAttribute("content",a||o)}}if(sdk.Builder.isEditing&&i.notifyStateChange(),i.props.contentLoaded&&i.props.contentLoaded(e,t),e&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length&&(e.state||(e.state={}),e.inputs.forEach((function(t){t&&t.name&&void 0!==t.defaultValue&&void 0===e.state[t.name]&&(e.state[t.name]=t.defaultValue)}))),e&&e.state){var l=__assign(__assign({},i.state),{updates:(i.state&&i.state.updates||0)+1,state:Object.assign(i.rootState,__assign(__assign(__assign(__assign({},i.state.state),{location:i.locationState,deviceSize:i.deviceSizeState,device:i.device}),e.state),i.externalState))});i.mounted?i.setState(l):i.state=l}if(e&&e.jsCode&&sdk.Builder.isBrowser&&!i.options.codegen){var u=!1;if(sdk.Builder.isEditing&&(i.lastJsCode===e.jsCode?u=!0:i.lastJsCode=e.jsCode),!u){var d=i.state.state;try{new Function("data","ref","state","update","element","Builder","builder","context",e.jsCode)(e,i,d,i.state.update,i.ref,sdk.Builder,sdk.builder,i.state.context)}catch(t){var c=toError(t);sdk.Builder.isBrowser?console.warn("Builder custom code error:",c.message,"in",e.jsCode,c.stack):"undefined"!=typeof process&&void 0!==process.env&&process.env.DEBUG&&console.debug("Builder custom code error:",c.message,"in",e.jsCode,c.stack)}}}if(e&&e.httpRequests&&!i.props.noAsync&&!(u=!1)){var p=function(t){var n=e.httpRequests[t];if(n&&(!i.data[t]||sdk.Builder.isEditing))if(sdk.Builder.isBrowser){var r=i.evalExpression(n);if(sdk.Builder.isEditing&&i.lastHttpRequests[t]===r)return"continue";i.lastHttpRequests[t]=r;var a=n.match(/builder\.io\/api\/v2\/([^\/\?]+)/i);a&&a[1],i.handleRequest(t,r);var o=i.httpSubscriptionPerKey[t];o&&o.unsubscribe();var s=i.httpSubscriptionPerKey[t]=i.onStateChange.subscribe((function(){var e=i.evalExpression(n);e!==r&&(i.handleRequest(t,e),i.lastHttpRequests[t]=e)}));i.subscriptions.add(s)}else i.handleRequest(t,i.evalExpression(n))};for(var f in e.httpRequests)p(f)}};var r=i.inlinedContent;if(r&&r.content&&(r=r.content),i.sizes=getSizesForBreakpoints((null===(n=null==r?void 0:r.meta)||void 0===n?void 0:n.breakpoints)||{}),i.state={context:__assign(__assign({},t.context),{apiKey:sdk.builder.apiKey||i.props.apiKey}),state:Object.assign(i.rootState,__assign(__assign(__assign(__assign({},i.inlinedContent&&i.inlinedContent.data&&i.inlinedContent.data.state),{isBrowser:sdk.Builder.isBrowser,isServer:!sdk.Builder.isBrowser,_hydrate:t.hydrate,location:i.locationState,deviceSize:i.deviceSizeState,device:i.device}),i.getHtmlData()),t.data)),updates:0,key:0,update:i.updateState},sdk.Builder.isBrowser){var a=i.props.apiKey;if(a&&a!==i.builder.apiKey&&(i.builder.apiKey=a),i.inlinedContent){var o=i.inlinedContent.content||i.inlinedContent;i.onContentLoaded(null==o?void 0:o.data,getContentWithInfo(o))}}return i}return __extends(t,e),Object.defineProperty(t.prototype,"options",{get:function(){return __assign(__assign({},t.defaults),this.props)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.props.model||this.props.modelName||this.props.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.ref},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inlinedContent",{get:function(){if(!this.isPreviewing||this.props.inlineContent)return this.props.content},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"builder",{get:function(){return this.props.builder||sdk.builder},enumerable:!1,configurable:!0}),t.prototype.getHtmlData=function(){var e=this.inlinedContent&&this.inlinedContent.id||this.props.entry,t=e&&sdk.Builder.isBrowser&&document.querySelector('script[data-builder-json="'.concat(e,'"],script[data-builder-state="').concat(e,'"]'));if(t)try{return JSON.parse(t.innerText)}catch(e){console.warn("Could not parse Builder.io HTML data transfer",e,t.innerText)}return{}},Object.defineProperty(t.prototype,"device",{get:function(){return this.builder.getUserAttributes().device||"desktop"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locationState",{get:function(){return __assign(__assign({},pick(this.location,"pathname","hostname","search","host")),{path:this.location.pathname&&this.location.pathname.split("/").slice(1)||"",query:searchToObject(this.location)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceSizeState",{get:function(){return sdk.Builder.isBrowser?this.sizes.getSizeForWidth(window.innerWidth):sizeMap[this.device]||"large"},enumerable:!1,configurable:!0}),t.renderInto=function(e,n,i,r){if(void 0===n&&(n={}),void 0===i&&(i=!0),void 0===r&&(r=!1),console.debug("BuilderPage.renderInto",e,n,i,this),e){var a=null;if("string"==typeof e?a=document.querySelector(e):e instanceof Element&&(a=e),a){var o=a.classList.contains("builder-hydrated");if(!o||r){a.classList.add("builder-hydrated");var s=i&&a.innerHTML.includes("builder-block");if(!a.classList.contains("builder-component")){var l=a.querySelector(".builder-api-styles")||(a.previousElementSibling&&a.previousElementSibling.matches(".builder-api-styles")?a.previousElementSibling:null),u="";if(l)l.innerHTML.replace(/\/\*start:([^\*]+?)\*\/([\s\S]*?)\/\*end:([^\*]+?)\*\//g,(function(e,t,n){var i=null;try{i=document.querySelector('[data-emotion-css="'.concat(t,'"]'))}catch(e){console.warn(e)}return i?i.innerHTML=n:sdk.Builder.isEditing||(u+=e),e})),sdk.Builder.nextTick((function(){l.innerHTML=u}));var d=a.querySelector(".builder-component");d?a=d:s=!1}location.search.includes("builder.debug=true")&&console.debug("hydrate",s,a);var c=a;if(!o){var p=document.createElement("div");a.insertAdjacentElement("beforebegin",p),p.appendChild(a),c=p}if((sdk.Builder.isEditing||sdk.Builder.isBrowser&&location.search.includes("builder.preview="))&&(s=!1),s&&a){var f=ReactDOM__default.default.render(React__default.default.createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=f,f}var v=ReactDOM__default.default.render(React__default.default.createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=v,v}console.debug("Tried to hydrate multiple times")}}},t.prototype.componentDidMount=function(){var e,t=this;this.mounted=!0,this.asServer&&(this.asServer=!1,this.updateState((function(e){e.isBrowser=!0,e.isServer=!1}))),sdk.Builder.isIframe&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.sdkInjected",data:{modelName:this.name}},"*")),sdk.Builder.isBrowser&&(window.addEventListener("resize",this.resizeListener),sdk.Builder.isEditing&&window.addEventListener("message",this.messageListener),(sdk.Builder.isEditing||sdk.Builder.isPreviewing)&&sdk.Builder.nextTick((function(){t.firstLoad=!1,t.reload()})),setTimeout((function(){window.dispatchEvent(new CustomEvent("builder:component:load",{detail:{ref:t}}))})))},Object.defineProperty(t.prototype,"isPreviewing",{get:function(){return(sdk.Builder.isServer||sdk.Builder.isBrowser&&sdk.Builder.isPreviewing&&!this.firstLoad)&&sdk.builder.previewingModel===this.name},enumerable:!1,configurable:!0}),t.prototype.notifyStateChange=function(){if(!sdk.Builder.isServer&&this&&this.state){var e=this.state.state;this.props.onStateChange&&this.props.onStateChange(e),sdk.Builder.isBrowser&&window.dispatchEvent(new CustomEvent("builder:component:stateChange",{detail:{state:e,ref:this}})),this.onStateChange.next(e)}},t.prototype.processStateFromApi=function(e){return e},Object.defineProperty(t.prototype,"location",{get:function(){return this.props.location||(sdk.Builder.isBrowser?location:{})},enumerable:!1,configurable:!0}),t.prototype.getCssFromFont=function(e,t){var n=e.family+(e.kind&&!e.kind.includes("#")?", "+e.kind:""),i=n.split(",")[0],r=e.fileUrl?e.fileUrl:e.files&&e.files.regular,a="";if(r&&n&&i&&(a+='\n@font-face {\n  font-family: "'.concat(n,'";\n  src: local("').concat(i,"\"), url('").concat(r,"') format('woff2');\n  font-display: fallback;\n  font-weight: 400;\n}\n        ").trim()),e.files)for(var o in e.files){if(String(Number(o))===o){var s=e.files[o];s&&s!==r&&(a+='\n@font-face {\n  font-family: "'.concat(n,"\";\n  src: url('").concat(s,"') format('woff2');\n  font-display: fallback;\n  font-weight: ").concat(o,";\n}\n          ").trim())}}return a},t.prototype.componentWillUnmount=function(){this.unsubscribe(),sdk.Builder.isBrowser&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("message",this.messageListener))},t.prototype.getFontCss=function(e){var t=this;return this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&e.customFonts.length&&e.customFonts.map((function(n){return t.getCssFromFont(n,e)})).join(" ")||""},t.prototype.ensureFontsLoaded=function(e){if(this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&Array.isArray(e.customFonts))for(var t=0,n=e.customFonts;t<n.length;t++){var i=n[t],r=i.fileUrl?i.fileUrl:i.files&&i.files.regular;if(!fontsLoaded.has(r)){var a=this.getCssFromFont(i,e);if(fontsLoaded.add(r),!a)continue;var o=document.createElement("style");o.className="builder-custom-font",o.setAttribute("data-builder-custom-font",r),o.innerHTML=a,document.head.appendChild(o)}}},t.prototype.getCss=function(e){var t,n=null===(t=this.useContent)||void 0===t?void 0:t.id,i=(null==e?void 0:e.cssCode)||"";return n&&(i=i.replace(/&/g,".builder-component-".concat(n))),i+this.getFontCss(e)},Object.defineProperty(t.prototype,"data",{get:function(){var e,t=__assign(__assign(__assign({},this.inlinedContent&&(null===(e=this.inlinedContent.data)||void 0===e?void 0:e.state)),this.externalState),this.state.state);return Object.assign(this.rootState,t),t},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t=this;this.props.data&&e.data!==this.props.data&&this.state.update((function(e){Object.assign(e,t.externalState)})),sdk.Builder.isEditing&&this.inlinedContent&&e.content!==this.inlinedContent&&this.onContentLoaded(this.inlinedContent.data,this.inlinedContent)},t.prototype.checkStyles=function(e){if(this.styleRef){var t=this.getCss(e);this.styleRef.innerHTML!==t&&(this.styleRef.innerHTML=t)}},t.prototype.reload=function(){this.setState({key:this.state.key+1})},Object.defineProperty(t.prototype,"content",{get:function(){var e=this.inlinedContent;return e&&e.content&&(e=__assign(__assign({},e),{data:e.content})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"externalState",{get:function(){return __assign(__assign({},this.props.data),this.props.locale?{locale:this.props.locale}:{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useContent",{get:function(){return this.content||this.state.context.builderContent},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t=this,n=this.content,i=sdk.Builder.isBrowser&&this.externalState&&size(this.externalState)&&hash__default.default(this.externalState),r=sdk.Builder.isEditing?this.name:this.props.entry;r&&!sdk.Builder.isEditing&&i&&i.length<300&&(r+=":"+i);var a=this.props.dataOnly?React__default.default.Fragment:"div",o=null===(e=this.useContent)||void 0===e?void 0:e.id;return React__default.default.createElement(a,{onClick:function(e){!sdk.Builder.isEditing||t.props.isChild||t.props.stopClickPropagationWhenEditing||e.stopPropagation()},className:"builder-component ".concat(o?"builder-component-".concat(o):""),"data-name":this.name,"data-source":"Rendered by Builder.io",key:this.state.key,ref:function(e){return t.ref=e}},React__default.default.createElement(BuilderMetaContext.Consumer,null,(function(e){return React__default.default.createElement(BuilderMetaContext.Provider,{value:"boolean"==typeof t.props.ampMode?__assign(__assign({},e),{ampMode:t.props.ampMode}):e},React__default.default.createElement(BuilderAsyncRequestsContext.Consumer,null,(function(e){var i;return t._asyncRequests=e&&e.requests,t._errors=e&&e.errors,t._logs=e&&e.logs,React__default.default.createElement(BuilderContent,{isStatic:t.props.isStatic||sdk.Builder.isStatic,key:(null===(i=t.inlinedContent)||void 0===i?void 0:i.id)||("content"in t.props&&!t.isPreviewing?"null-content-prop":"no-content-prop"),builder:t.builder,ref:function(e){return t.contentRef=e},contentLoaded:function(e,n){return t.onContentLoaded(e,n)},options:__assign(__assign(__assign(__assign(__assign(__assign({key:r,entry:t.props.entry},n&&{initialContent:[n]}),!n&&"content"in t.props&&!t.isPreviewing&&{initialContent:[]}),t.props.url&&{url:t.props.url}),t.props.options),t.props.locale?{locale:t.props.locale}:{}),t.options.codegen&&{format:"react"}),inline:t.props.inlineContent||!t.isPreviewing&&"content"in t.props,contentError:t.props.contentError,modelName:t.name||"page"},(function(e,n,i){var r;if(t.props.dataOnly)return null;i&&i.id&&(t.state.breakpoints&&(i.meta=i.meta||{},i.meta.breakpoints=t.state.breakpoints),t.state.context.builderContent=i),sdk.Builder.isBrowser&&sdk.Builder.nextTick((function(){t.checkStyles(e)}));var a=t.options.codegen;if(a&&!t.Component&&(null==e?void 0:e.blocksJs)){var o=Array.from(new Set(sdk.Builder.components.map((function(e){return e.name})))),s=sdk.Builder.components.slice().reverse(),l=o.map((function(e){return s.find((function(t){return t.class&&t.name===e}))})),u=o.map((function(e){return(e||"").replace(/[^\w]+/gi,"")})),d=l.map((function(e){return wrapComponent(e)}));t.Component=(new(Function.bind.apply(Function,__spreadArray(__spreadArray([void 0,"jsx","_css","Builder","builder","React","useBuilderState"],u,!1),[e.blocksJs],!1)))).apply(void 0,__spreadArray([core.jsx,core.css,sdk.Builder,sdk.builder,React__default.default,function(e){var t=React__default.default.useState(0)[1];return React__default.default.useState((function(){return onChange(e,(function(){t((function(e){return e+1}))}))}))[0]}],d,!1))}var c=(null==e?void 0:e.blocks)||[],p=c.find((function(e){var t;return null===(t=e.id)||void 0===t?void 0:t.startsWith("builder-pixel")}));return e&&!p&&c.length>0&&c.push(getBuilderPixel(sdk.builder.apiKey)),e?React__default.default.createElement("div",__assign({"data-builder-component":t.name,"data-builder-content-id":i.id},t.isPreviewing?{"data-builder-variation-id":i.testVariationId||i.variationId||i.id}:{}),!a&&t.getCss(e)&&React__default.default.createElement("style",{ref:function(e){return t.styleRef=e},className:"builder-custom-styles",dangerouslySetInnerHTML:{__html:t.getCss(e)}}),React__default.default.createElement(BuilderStoreContext.Provider,{value:__assign(__assign({},t.state),{rootState:t.rootState,state:t.data,content:i,renderLink:t.props.renderLink})},a&&t.Component?React__default.default.createElement(t.Component,{data:t.data,context:t.state.context}):React__default.default.createElement(BuilderBlocks,{key:String(!!(null===(r=null==e?void 0:e.blocks)||void 0===r?void 0:r.length)),emailMode:t.props.emailMode,fieldName:"blocks",blocks:c}))):n?React__default.default.createElement("div",{"data-builder-component":t.name,className:"builder-loading"},t.props.children):React__default.default.createElement("div",{"data-builder-component":t.name,className:"builder-no-content"})}))})))})))},t.prototype.evalExpression=function(e){var t=this,n=this.data;return String(e).replace(/{{([^}]+)}}/g,(function(e,i){return tryEval(i,n,t._errors)}))},t.prototype.handleRequest=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,a,o=this;return __generator(this,(function(s){return sdk.Builder.isIframe&&fetchCache[t]?(this.updateState((function(n){n[e]=fetchCache[t]})),[2,fetchCache[t]]):(n=function(){return __awaiter(o,void 0,void 0,(function(){var n,i,r,a;return __generator(this,(function(o){switch(o.label){case 0:n=Date.now(),sdk.Builder.isBrowser||console.time("Fetch "+t),o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,fetch(t)];case 2:return[4,o.sent().json()];case 3:return i=o.sent(),[3,6];case 4:return r=o.sent(),a=toError(r),this._errors&&this._errors.push(a),this._logs&&this._logs.push("Fetch to ".concat(t," errored in ").concat(Date.now()-n,"ms")),[2];case 5:return sdk.Builder.isBrowser||(console.timeEnd("Fetch "+t),this._logs&&this._logs.push("Fetched ".concat(t," in ").concat(Date.now()-n,"ms"))),[7];case 6:return i&&(sdk.Builder.isIframe&&(fetchCache[t]=i),this.updateState((function(t){t[e]=i}))),[2,i]}}))}))},(i=this._asyncRequests&&this._asyncRequests.find((function(e){return isRequestInfo(e)&&e.url===t})))?((r=i.promise).then((function(t){t&&o.updateState((function(n){n[e]=t}))})),[2,r]):(a=n(),sdk.Builder.nextTick((function(){o._asyncRequests&&o._asyncRequests.push(a)})),[2,a]))}))}))},t.prototype.unsubscribe=function(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=new sdk.Subscription)},t.prototype.handleBuilderRequest=function(e,t){var n=this,i=tryEval(t,this.data,this._errors);this.subscriptions&&this.unsubscribe(),i&&this.subscriptions.add(this.builder.queueGetContent(i.model,i).subscribe((function(t){t&&n.updateState((function(n){n[e]=t}))})))},t.defaults={codegen:Boolean(sdk.Builder.isBrowser&&location.href.includes("builder.codegen=true"))},__decorate([debounceNextTick,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"notifyStateChange",null),t}(React__default.default.Component),withChildren=function(e){var t=React__default.default.forwardRef((function(t,n){var i=t.children||t.builderBlock&&t.builderBlock.children&&t.builderBlock.children.map((function(e){return React__default.default.createElement(BuilderBlock,{key:e.id,block:e})}));return React__default.default.createElement(e,__assign({},t,{ref:n}),i)}));return t.builderOptions={canHaveChildren:!0},t};function useIsPreviewing(){var e=React.useState(!1),t=e[0],n=e[1];return React.useEffect((function(){(sdk.Builder.isEditing||sdk.Builder.isPreviewing)&&n(!0)}),[]),t}sdk.Builder.isReact=!0,Object.defineProperty(exports,"Builder",{enumerable:!0,get:function(){return sdk.Builder}}),Object.defineProperty(exports,"builder",{enumerable:!0,get:function(){return sdk.builder}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return sdk.builder}}),exports.BuilderAsyncRequestsContext=BuilderAsyncRequestsContext,exports.BuilderBlockComponent=BuilderBlock,exports.BuilderBlocks=BuilderBlocks,exports.BuilderComponent=BuilderComponent,exports.BuilderContent=BuilderContent,exports.BuilderMetaContext=BuilderMetaContext,exports.BuilderPage=BuilderComponent,exports.BuilderStoreContext=BuilderStoreContext,exports.stringToFunction=stringToFunction,exports.useIsPreviewing=useIsPreviewing,exports.withChildren=withChildren;
//# sourceMappingURL=builder-react-lite.cjs.js.map
